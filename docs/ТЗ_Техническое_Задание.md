# Техническое задание: Мобильное приложение "Ассистент ветеринара"

## Часть 2: Техническое задание (для разработчиков)

---

## 1. Общие сведения

### 1.1. Назначение документа
Данный документ описывает технические требования к разработке мобильного приложения "Ассистент ветеринара" для платформ Android и iOS.

### 1.2. Платформы
- **Android**: версия 8.0 (API level 26) и выше
- **iOS**: версия 13.0 и выше

### 1.3. Технологический стек (предложение)
- **Фреймворк**: Flutter (Dart)
- **Локальная БД**: SQLite через Drift (или sqflite)
- **Управление состоянием**: Riverpod или Bloc
- **Навигация**: go_router
- **Генерация PDF**: pdf package или printing package
- **Распознавание речи**: 
  - Облако: Google Speech-to-Text / Yandex SpeechKit / Azure Speech Services
  - Офлайн: Whisper (ggml) или Vosk
- **Работа с файлами**: path_provider, file_picker, share_plus
- **Запись аудио**: record, flutter_sound, или встроенные возможности платформы
- **Работа с изображениями**: image_picker (камера и галерея), image (обработка и сжатие)

---

## 2. Архитектура приложения

### 2.1. Общая архитектура

Приложение следует принципам **Clean Architecture** с разделением на слои:

```
┌─────────────────────────────────────┐
│         Presentation Layer          │
│  (UI, Widgets, State Management)    │
├─────────────────────────────────────┤
│          Domain Layer               │
│  (Entities, Use Cases, Services)    │
├─────────────────────────────────────┤
│           Data Layer                │
│  (Repositories, Data Sources, DB)   │
└─────────────────────────────────────┘
```

### 2.2. Модульная структура проекта

```
lib/
├── core/                    # Общие утилиты, константы, DI
│   ├── di/                  # Dependency Injection
│   ├── config/              # Конфигурация (STT провайдеры, настройки)
│   ├── errors/              # Обработка ошибок
│   └── utils/               # Утилиты
├── features/
│   ├── patients/            # Модуль пациентов
│   │   ├── data/
│   │   ├── domain/
│   │   └── presentation/
│   ├── templates/           # Модуль шаблонов протоколов
│   │   ├── data/
│   │   ├── domain/
│   │   └── presentation/
│   ├── examinations/        # Модуль осмотров/протоколов
│   │   ├── data/
│   │   ├── domain/
│   │   └── presentation/
│   ├── speech/              # Модуль распознавания речи
│   │   ├── recognizers/     # STT провайдеры (Cloud, Private, OnDevice)
│   │   ├── router/          # Роутер выбора провайдера
│   │   └── parser/          # Парсер полей из текста
│   ├── pdf/                 # Модуль генерации PDF
│   │   ├── generators/
│   │   └── templates/
│   └── admin/               # Административный модуль
│       ├── data/
│       ├── domain/
│       └── presentation/
└── main.dart
```

---

## 3. Модели данных

### 3.1. Пациент (Patient)

```dart
class Patient {
  final String id;                    // UUID
  final String species;                // Вид (собака, кошка и т.д.)
  final String? breed;                 // Порода
  final String? name;                  // Кличка
  final String? gender;                // Пол (м/ж)
  final String? color;                // Окрас
  final String? chipNumber;            // Номер чипа
  final String? tattoo;                // Описание тату
  final String ownerName;              // ФИО владельца
  final String? ownerPhone;           // Телефон владельца
  final String? ownerEmail;            // Email владельца
  final DateTime createdAt;
  final DateTime updatedAt;
}
```

### 3.2. Осмотр (Examination)

```dart
class Examination {
  final String id;                     // UUID
  final String patientId;              // Ссылка на пациента
  final String templateType;          // Тип шаблона (cardio, ultrasound, dental)
  final String templateVersion;        // Версия шаблона
  final DateTime examinationDate;      // Дата осмотра
  final String? veterinarianName;      // ФИО врача
  final List<String> audioFilePaths;   // Пути к аудиофайлам
  final List<ExaminationPhoto> photos; // Прикреплённые фотографии
  final String? anamnesis;             // Анамнез (текст, голос или ручной ввод)
  final String? sttText;               // Распознанный текст
  final SttProvider? sttProvider;      // Какой провайдер использовался
  final String? sttModelVersion;       // Версия модели STT
  final Map<String, FieldValue> extractedFields; // Извлечённые поля
  final ValidationStatus validationStatus;
  final List<ValidationWarning> warnings;
  final String? pdfPath;               // Путь к PDF файлу
  final DateTime createdAt;
  final DateTime updatedAt;
}

enum SttProvider { cloud, privateServer, onDevice }

enum ValidationStatus { valid, warnings, errors }

class ValidationWarning {
  final String fieldKey;
  final String message;
  final WarningLevel level;            // warning или error
}

enum WarningLevel { warning, error }
```

### 3.3. Фотография осмотра (ExaminationPhoto)

```dart
class ExaminationPhoto {
  final String id;                     // UUID
  final String examinationId;          // Ссылка на осмотр
  final String filePath;               // Путь к файлу изображения
  final String? description;           // Краткое описание фотографии
  final DateTime takenAt;              // Дата и время создания фото
  final int orderIndex;                 // Порядок отображения
  final DateTime createdAt;
}
```

**Назначение:**
- Хранение фотографий, привязанных к протоколу осмотра
- Особенно важно для фото протоколов от других приборов (ЭКГ, УЗИ, рентген и т.д.)
- Описание помогает идентифицировать назначение фотографии

### 3.4. Значение поля (FieldValue)

```dart
class FieldValue {
  final dynamic value;                 // Может быть String, int, double, bool, List
  final double? confidence;           // Уверенность распознавания (0.0-1.0)
  final String? source;                // Откуда взято (stt, manual, clarification)
  final DateTime? extractedAt;
}
```

### 3.4. Шаблон протокола (ProtocolTemplate)

```json
{
  "id": "cardio",
  "version": "1.0.0",
  "locale": "ru",
  "title": "Протокол кардиологического осмотра",
  "description": "Шаблон для кардиологических обследований",
  "sections": [
    {
      "id": "vitals",
      "title": "Основные показатели",
      "order": 1,
      "fields": [
        {
          "key": "hr",
          "label": "ЧСС",
          "type": "number",
          "unit": "уд/мин",
          "required": true,
          "validation": {
            "min": 40,
            "max": 240,
            "warnOnly": false
          },
          "extraction": {
            "patterns": [
              "ЧСС\\s*(?:[:=]\\s*)?(\\d+)",
              "частота\\s*(?:сердечных\\s*)?сокращений\\s*(?:[:=]\\s*)?(\\d+)"
            ],
            "keywords": ["ЧСС", "частота сокращений", "пульс"]
          }
        },
        {
          "key": "rhythm",
          "label": "Ритм",
          "type": "select",
          "options": ["синусовый", "аритмия", "мерцательная аритмия", "другое"],
          "required": true,
          "extraction": {
            "keywords": ["ритм", "синусовый", "аритмия"]
          }
        }
      ]
    },
    {
      "id": "ecg",
      "title": "Данные ЭКГ",
      "order": 2,
      "fields": [...]
    }
  ],
  "tables": [
    {
      "id": "measurements",
      "name": "Измерения",
      "columns": [
        {"key": "parameter", "label": "Параметр", "type": "text"},
        {"key": "value", "label": "Значение", "type": "number"},
        {"key": "unit", "label": "Ед. изм.", "type": "text"}
      ],
      "dynamic": true
    }
  ],
  "pdfLayout": {
    "header": {
      "logo": "assets/logo.png",
      "title": "Протокол кардиологического осмотра",
      "showPatientInfo": true
    },
    "footer": {
      "pageNumbers": true,
      "showDate": true
    },
    "sections": [
      {"sectionId": "vitals", "title": "Основные показатели"},
      {"sectionId": "ecg", "title": "Данные ЭКГ"}
    ]
  }
}
```

### 3.5. Справочник (Reference)

```dart
class Reference {
  final String id;
  final String type;                   // species, breed, dentalStatus и т.д.
  final String key;
  final String label;
  final int? order;
  final Map<String, dynamic>? metadata;
}
```

---

## 4. Функциональные требования

### 4.1. Модуль пациентов

#### 4.1.1. CRUD операции
- **Создание**: форма добавления нового пациента со всеми полями
- **Чтение**: список пациентов, детальная информация о пациенте
- **Обновление**: редактирование данных пациента
- **Удаление**: удаление пациента (с подтверждением)

#### 4.1.2. Поиск пациентов
- **Текстовый поиск**: по кличке, номеру чипа, ФИО владельца
- **Голосовой поиск**: распознавание голосового запроса и поиск по результату
- **Фильтрация**: по виду животного, дате добавления

#### 4.1.3. Ограничения бесплатной версии
- Проверка лимита пациентов (10 для бесплатной версии)
- Блокировка добавления при достижении лимита
- Предложение перейти на платную версию

### 4.2. Модуль шаблонов протоколов

#### 4.2.1. Загрузка шаблонов
- Загрузка из assets при первом запуске
- Кэширование шаблонов в БД
- Валидация JSON-схемы шаблона

#### 4.2.2. Версионирование
- Поддержка версий шаблонов (semver)
- Миграция данных при обновлении шаблона (если нужно)

#### 4.2.3. Генерация UI из шаблона
- Автоматическое создание форм на основе структуры шаблона
- Поддержка всех типов полей: text, number, select, multiselect, bool, date, range
- Валидация полей на основе правил из шаблона

### 4.3. Модуль осмотров

#### 4.3.1. Создание осмотра
1. Выбор пациента (поиск или голосом)
2. Выбор типа протокола (шаблона)
3. Запись анамнеза (опционально): голосом или вручную
4. Запись или загрузка аудио
5. Распознавание речи (через STT Router)
6. Извлечение полей из текста
7. Диалог уточнений (если нужно)
8. Ручное редактирование (в т.ч. анамнеза)
9. Валидация данных
10. Сохранение протокола
11. Генерация PDF

#### 4.3.2. Запись аудио
- Запись через микрофон устройства
- Формат: PCM 16kHz, моно (для STT)
- Сохранение в локальное хранилище
- Индикатор записи (визуальный и звуковой)

#### 4.3.3. Загрузка аудио
- Выбор файла из файловой системы
- Поддержка форматов: WAV, MP3, M4A, AAC
- Конвертация в нужный формат для STT (если требуется)

#### 4.3.4. Извлечение полей из текста
- Парсинг по регулярным выражениям (patterns из шаблона)
- Поиск ключевых слов (keywords из шаблона)
- Fuzzy matching для справочных значений
- Извлечение числовых значений с единицами измерения
- Определение confidence для каждого поля

#### 4.3.5. Диалог уточнений
- Определение полей с низким confidence (< 0.7) или пустых обязательных полей
- Последовательный опрос по шаблону
- Возможность ответа голосом или вводом вручную
- Пропуск необязательных полей

#### 4.3.6. Запись анамнеза
- **Назначение**: хранение в протоколе осмотра сведений о жалобах, перенесённых заболеваниях, текущей терапии, условиях содержания и т.п.
- **Ввод анамнеза**:
  - Голосом: запись аудио → распознавание речи (STT) → сохранение текста в поле «Анамнез»
  - Вручную: ввод и редактирование текста в поле «Анамнез»
  - Возможность комбинировать: сначала голос, затем правка вручную
- **Поведение**:
  - Заполнение необязательно; поле может быть пустым
  - Анамнез можно добавить или изменить в любой момент до сохранения протокола
  - Текст хранится в записи осмотра (поле `anamnesis` в БД)
- **Отображение**: анамнез выводится в протоколе (в приложении и в PDF) отдельной секцией после данных о пациенте и перед данными осмотра.

#### 4.3.7. Валидация данных
- Проверка обязательных полей (анамнез не входит в обязательные)
- Проверка диапазонов (min/max для чисел)
- Проверка форматов (regex для текста)
- Проверка зависимостей между полями
- Подсветка проблемных полей:
  - Красный: ошибка (блокирует сохранение)
  - Жёлтый: предупреждение (можно сохранить)
- Список всех предупреждений и ошибок

#### 4.3.8. Работа с фотографиями
- **Добавление фотографий**:
  - Съёмка фото через камеру устройства
  - Выбор фото из галереи устройства
  - Поддержка форматов: JPEG, PNG
  - Автоматическое сжатие изображений для экономии места (опционально)
  
- **Описание фотографий**:
  - Возможность добавить краткое текстовое описание к каждой фотографии
  - Примеры описаний: "ЭКГ от 15.01.2026", "УЗИ печени", "Рентген зуба 42", "Протокол ЭКГ-аппарата"
  - Описание помогает идентифицировать назначение фотографии, особенно для протоколов от других приборов
  
- **Управление фотографиями**:
  - Просмотр всех прикреплённых фотографий (галерея)
  - Редактирование описания фотографии
  - Удаление фотографий
  - Изменение порядка отображения (drag & drop)
  
- **Хранение фотографий**:
  - Сохранение в локальное хранилище устройства
  - Путь к файлу сохраняется в БД
  - Уникальные имена файлов (например: `photo_{examinationId}_{timestamp}.jpg`)
  - Связь с осмотром через `examinationId`
  
- **Использование в PDF**:
  - Фотографии включаются в PDF протокола
  - Размещение фотографий в соответствующей секции протокола
  - Подписи к фотографиям (описание)
  - Оптимизация размера изображений для PDF

### 4.4. Модуль распознавания речи (STT)

#### 4.4.1. Архитектура STT Router

```dart
abstract class SpeechRecognizer {
  Future<SttResult> recognize(AudioFile audio);
  bool isAvailable();
  SttProvider get provider;
}

class SttResult {
  final String text;
  final double confidence;
  final Map<String, double> wordConfidences;
  final List<WordTimestamp> timestamps;
  final SttProvider provider;
  final String? modelVersion;
  final Duration processingTime;
}

class SttRouter {
  Future<SttResult> transcribe(
    AudioFile audio, {
    SttMode? mode,
    bool preferOffline = false,
  });
}
```

#### 4.4.2. Облачный провайдер (CloudRecognizer)
- Поддержка Google Speech-to-Text, Yandex SpeechKit, Azure Speech
- Конфигурация через настройки (API ключи, endpoint)
- Обработка ошибок сети, таймаутов
- Retry логика

#### 4.4.3. Приватный сервер (PrivateServerRecognizer)
- REST API клиент для собственного STT сервера
- Поддержка Whisper или Vosk на сервере
- Конфигурация: URL сервера, токен авторизации
- Проверка доступности сервера

#### 4.4.4. Офлайн провайдер (OnDeviceRecognizer)
- Интеграция Whisper (ggml) или Vosk
- Загрузка модели при первом запуске (или вшита в assets)
- Обработка на устройстве (изоляция в отдельном isolate для Flutter)
- Оптимизация для мобильных CPU

#### 4.4.5. Политика выбора провайдера
- **Auto режим**:
  1. Если доступен приватный сервер и не запрещён → использовать его
  2. Иначе если есть интернет и разрешён облачный → облако
  3. Иначе → офлайн
- **Offline only**: только офлайн провайдер
- **Cloud only**: только облако (если доступно)
- **Private only**: только приватный сервер

#### 4.4.6. Настройки STT
- Выбор режима работы
- Флаг "Не отправлять аудио во внешние облака"
- Флаг "Использовать только Wi-Fi для облака"
- Настройки провайдеров (API ключи, URL серверов)

### 4.5. Модуль генерации PDF

#### 4.5.1. Структура PDF
- **Шапка**: логотип (изображение) + текст шапки + информация о клинике
- **Информация о пациенте**: все данные из карточки пациента
- **Анамнез**: текст анамнеза (если заполнен) — отдельная секция после данных о пациенте и перед данными осмотра
- **Информация об осмотре**: дата, врач, тип протокола
- **Содержание протокола**: секции и поля из шаблона
- **Таблицы**: форматированные таблицы с данными
- **Фотографии**: прикреплённые фотографии с описаниями (если есть)
- **Подпись врача**: если включено в настройках
- **Подвал**: номер страницы, дата создания

#### 4.5.2. Форматирование
- Профессиональный дизайн
- Читаемые шрифты
- Правильные отступы и выравнивание
- Поддержка кириллицы

#### 4.5.3. Сохранение PDF
- Сохранение в локальное хранилище устройства
- Путь сохраняется в записи осмотра
- Уникальное имя файла (например: `protocol_{examinationId}_{date}.pdf`)

#### 4.5.4. Экспорт и шаринг
- Сохранение в папку "Документы" или выбранную пользователем
- Отправка по email (автоматически берётся из данных пациента)
- Шаринг через системный share sheet (WhatsApp, Telegram, облако и т.д.)
- Печать (через системный Print Intent)

### 4.6. Административный модуль

#### 4.6.1. Авторизация администратора
- Отдельный экран входа
- Пароль или PIN-код
- Хранение хэша пароля локально (bcrypt)

#### 4.6.2. Управление шаблонами
- Просмотр списка шаблонов
- Редактирование шаблона (JSON редактор с валидацией)
- Создание нового шаблона
- Импорт шаблона из файла
- Экспорт шаблона в файл
- Применение обновления шаблона

#### 4.6.3. Управление справочниками
- CRUD операции для справочников
- Импорт/экспорт справочников

#### 4.6.4. Настройки валидации
- Редактирование правил валидации для полей
- Настройка диапазонов, форматов

### 4.7. Экспорт/импорт базы данных

#### 4.7.1. Экспорт
- Формат: JSON
- Включает: всех пациентов, все осмотры (без аудио, только ссылки на файлы)
- Включает: метаданные фотографий (пути, описания)
- Опция: включить аудиофайлы и фотографии (архив ZIP)
- Сохранение в выбранную папку

#### 4.7.2. Импорт
- Загрузка JSON файла
- Валидация структуры данных
- Проверка версий схемы
- Импорт с обработкой конфликтов (замена или пропуск)
- Отчёт об импорте (сколько записей импортировано, ошибки)

---

## 5. Нефункциональные требования

### 5.1. Производительность
- Время отклика UI: < 0.5 сек
- Время распознавания речи: зависит от провайдера (облако: 2-5 сек, офлайн: 5-15 сек)
- Время генерации PDF: < 3 сек для типичного протокола
- Плавная работа на устройствах с 3+ ГБ RAM

### 5.2. Размер приложения
- Базовый размер: < 100 МБ (без офлайн модели)
- С офлайн моделью (Whisper tiny): +50-80 МБ
- Дополнительное место для аудио, PDF и фотографий: зависит от использования
- Рекомендация: сжатие фотографий для экономии места (опционально в настройках)

### 5.3. Безопасность
- Шифрование локальной БД (опционально, через SQLCipher)
- Безопасное хранение API ключей (через flutter_secure_storage)
- Хэширование паролей администратора (bcrypt)

### 5.4. Надёжность
- Обработка всех ошибок (сеть, файлы, БД)
- Восстановление после сбоев
- Логирование ошибок (локально)
- Валидация всех пользовательских данных

### 5.5. Локализация
- Первая версия: только русский язык
- Архитектура должна поддерживать добавление других языков

---

## 6. База данных

### 6.1. Схема БД (SQLite)

```sql
-- Пациенты
CREATE TABLE patients (
  id TEXT PRIMARY KEY,
  species TEXT NOT NULL,
  breed TEXT,
  name TEXT,
  gender TEXT,
  color TEXT,
  chip_number TEXT,
  tattoo TEXT,
  owner_name TEXT NOT NULL,
  owner_phone TEXT,
  owner_email TEXT,
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL
);

-- Осмотры
CREATE TABLE examinations (
  id TEXT PRIMARY KEY,
  patient_id TEXT NOT NULL,
  template_type TEXT NOT NULL,
  template_version TEXT NOT NULL,
  examination_date INTEGER NOT NULL,
  veterinarian_name TEXT,
  audio_file_paths TEXT, -- JSON array
  anamnesis TEXT,       -- Анамнез (текст)
  stt_text TEXT,
  stt_provider TEXT,
  stt_model_version TEXT,
  extracted_fields TEXT, -- JSON object
  validation_status TEXT NOT NULL,
  warnings TEXT, -- JSON array
  pdf_path TEXT,
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL,
  FOREIGN KEY (patient_id) REFERENCES patients(id)
);

-- Шаблоны протоколов
CREATE TABLE templates (
  id TEXT PRIMARY KEY,
  type TEXT NOT NULL UNIQUE,
  version TEXT NOT NULL,
  locale TEXT NOT NULL,
  content TEXT NOT NULL, -- JSON
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL
);

-- Справочники
CREATE TABLE references (
  id TEXT PRIMARY KEY,
  type TEXT NOT NULL,
  key TEXT NOT NULL,
  label TEXT NOT NULL,
  order_index INTEGER,
  metadata TEXT, -- JSON
  UNIQUE(type, key)
);

-- Фотографии осмотров
CREATE TABLE examination_photos (
  id TEXT PRIMARY KEY,
  examination_id TEXT NOT NULL,
  file_path TEXT NOT NULL,
  description TEXT,
  taken_at INTEGER NOT NULL,
  order_index INTEGER NOT NULL DEFAULT 0,
  created_at INTEGER NOT NULL,
  FOREIGN KEY (examination_id) REFERENCES examinations(id) ON DELETE CASCADE
);

-- Индексы
CREATE INDEX idx_patients_name ON patients(name);
CREATE INDEX idx_patients_chip ON patients(chip_number);
CREATE INDEX idx_patients_owner ON patients(owner_name);
CREATE INDEX idx_examinations_patient ON examinations(patient_id);
CREATE INDEX idx_examinations_date ON examinations(examination_date);
CREATE INDEX idx_references_type ON references(type);
CREATE INDEX idx_examination_photos_examination ON examination_photos(examination_id);
```

### 6.2. Миграции
- Использование Drift для управления миграциями
- Версионирование схемы БД
- Автоматическое применение миграций при обновлении

---

## 7. Структура JSON шаблонов (детальная спецификация)

### 7.1. Типы полей

- **text**: Текстовое поле
- **number**: Числовое поле (int или double)
- **select**: Выпадающий список (один вариант)
- **multiselect**: Множественный выбор
- **bool**: Чекбокс (да/нет)
- **date**: Дата
- **range**: Диапазон значений (от-до)

### 7.2. Правила валидации

```json
{
  "validation": {
    "required": true,
    "min": 40,
    "max": 240,
    "pattern": "^[A-Z0-9]+$",
    "warnOnly": false,
    "dependencies": [
      {
        "field": "other_field",
        "condition": "equals",
        "value": "some_value"
      }
    ]
  }
}
```

### 7.3. Правила извлечения

```json
{
  "extraction": {
    "patterns": [
      "ЧСС\\s*(?:[:=]\\s*)?(\\d+)",
      "частота\\s*(?:сердечных\\s*)?сокращений\\s*(?:[:=]\\s*)?(\\d+)"
    ],
    "keywords": ["ЧСС", "частота сокращений"],
    "fuzzyMatch": true,
    "unitExtraction": true
  }
}
```

---

## 8. Процесс разработки

### 8.1. Этапы разработки

1. **Подготовка** (1 неделя)
   - Настройка проекта Flutter
   - Настройка CI/CD
   - Создание структуры проекта
   - Настройка инструментов разработки

2. **Базовый функционал** (2-3 недели)
   - Модуль пациентов (CRUD, поиск)
   - Локальная БД
   - Базовый UI/навигация

3. **Шаблоны и протоколы** (2-3 недели)
   - Система шаблонов
   - Генерация UI из шаблона
   - Базовые протоколы (кардиология, УЗИ, стоматология)

4. **Распознавание речи** (3-4 недели)
   - Интеграция облачного STT
   - STT Router
   - Парсер полей из текста
   - Диалог уточнений

5. **PDF и экспорт** (2 недели)
   - Генерация PDF
   - Экспорт/импорт БД
   - Шаринг файлов

6. **Офлайн STT** (2-3 недели)
   - Интеграция Whisper или Vosk
   - Оптимизация для мобильных

7. **Административный модуль** (2 недели)
   - Редактирование шаблонов
   - Управление справочниками

8. **Тестирование и полировка** (2-3 недели)
   - Unit тесты
   - Widget тесты
   - Интеграционные тесты
   - Исправление багов
   - Оптимизация производительности

### 8.2. Версионирование

- Использование Semantic Versioning (MAJOR.MINOR.PATCH)
- Git теги для релизов
- Changelog для каждой версии

### 8.3. Контроль качества

- Линтинг кода (dart analyze)
- Форматирование (dart format)
- Code review
- Автоматические тесты

---

## 9. Тестирование

### 9.1. Unit тесты
- Тестирование бизнес-логики
- Тестирование парсера полей
- Тестирование валидации

### 9.2. Widget тесты
- Тестирование UI компонентов
- Тестирование форм

### 9.3. Интеграционные тесты
- Тестирование полного потока создания протокола
- Тестирование экспорта/импорта

### 9.4. Ручное тестирование
- Тестирование на реальных устройствах
- Тестирование различных сценариев использования

---

## 10. Документация

### 10.1. Техническая документация
- Архитектура приложения
- API документация (для внутренних модулей)
- Инструкции по развёртыванию

### 10.2. Пользовательская документация
- Руководство пользователя
- FAQ
- Видео-инструкции (опционально)

---

## 11. Развёртывание

### 11.1. Сборка приложения
- Android: APK и AAB через Flutter build
- iOS: IPA через Xcode или Fastlane

### 11.2. Публикация
- Google Play Store (Android)
- App Store (iOS)

### 11.3. Обновления
- Автоматические обновления через магазины
- Уведомления пользователей о новых версиях

---

## Приложение A: Примеры JSON шаблонов

(Детальные примеры шаблонов для кардиологии, УЗИ, стоматологии будут добавлены в отдельные файлы)

---

## Приложение B: Схема миграций БД

(Детальная схема миграций будет добавлена в процессе разработки)

---

**Версия документа**: 1.0  
**Дата создания**: 2026-01-18  
**Последнее обновление**: 2026-01-18
