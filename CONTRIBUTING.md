# Руководство по участию в разработке

## Система контроля версий

Проект использует **Git** для контроля версий и **GitLab** для хостинга репозитория.

## Структура веток

Проект следует модели **Git Flow**:

- `main` - стабильная версия (production-ready)
- `develop` - ветка разработки (интеграционная)
- `feature/*` - функциональные ветки
- `hotfix/*` - срочные исправления
- `release/*` - подготовка релизов

## Процесс разработки

### 1. Создание функциональной ветки

```bash
# Переключитесь на develop
git checkout develop
git pull origin develop

# Создайте новую ветку для функции
git checkout -b feature/название-функции

# Например:
git checkout -b feature/patients-crud
```

### 2. Работа над функцией

```bash
# Делайте коммиты по мере разработки
git add .
git commit -m "feat(patients): добавлен CRUD для пациентов"

# Периодически синхронизируйтесь с develop
git checkout develop
git pull origin develop
git checkout feature/название-функции
git merge develop
```

### 3. Завершение работы

```bash
# Убедитесь, что все изменения закоммичены
git status

# Отправьте ветку на сервер
git push origin feature/название-функции

# Создайте Merge Request в GitLab
# После ревью и одобрения - merge в develop
```

## Формат коммитов

Используйте следующий формат сообщений коммитов:

```
<тип>(<область>): <краткое описание>

<подробное описание (опционально)>
```

### Типы коммитов:

- `feat` - новая функциональность
- `fix` - исправление бага
- `docs` - изменения в документации
- `style` - форматирование кода (не влияет на функциональность)
- `refactor` - рефакторинг кода
- `test` - добавление или изменение тестов
- `chore` - обновление зависимостей, конфигурации

### Примеры:

```bash
git commit -m "feat(patients): добавлен поиск пациентов по кличке"
git commit -m "fix(stt): исправлена ошибка распознавания речи"
git commit -m "docs(readme): обновлена документация по установке"
git commit -m "refactor(database): оптимизированы запросы к БД"
```

## Code Review

Все изменения должны проходить через Code Review:

1. Создайте Merge Request в GitLab
2. Укажите описание изменений
3. Дождитесь одобрения от других разработчиков
4. После одобрения - выполните merge

## Тестирование

Перед созданием Merge Request убедитесь:

- ✅ Код проходит `flutter analyze`
- ✅ Все тесты проходят (`flutter test`)
- ✅ Код соответствует стилю проекта
- ✅ Документация обновлена (если нужно)

## Работа с конфликтами

При возникновении конфликтов при merge:

```bash
# Обновите вашу ветку
git checkout feature/ваша-ветка
git pull origin develop

# Разрешите конфликты вручную
# Затем:
git add .
git commit -m "merge: разрешены конфликты с develop"
```

## Релизы

Релизы создаются через теги:

```bash
# Переключитесь на main
git checkout main
git pull origin main

# Создайте тег
git tag -a v1.0.0 -m "Release version 1.0.0"

# Отправьте тег
git push origin v1.0.0
```

---

**Важно:** Всегда синхронизируйтесь с `develop` перед началом новой работы и перед созданием Merge Request.
